/*=======================================================
 APERTURA DELLE PAGINE (url,title)
=======================================================*/
function page(file, index = "Login") {
  $("[name='riga_pwd']").val("");
  if (!file) {
    file = "index";
  }
  url = "views/" + file + ".html";
  if (fs.existsSync(url)) {
    $("#icon_info").html('<div class="text-secondary"><div class="spinner-border spinner-border-sm" role="status"></div> Caricamento...</div>');
    $("main").load(url, function() {
      $("#title").html(index);
      $(document).prop("title", config.APP_NAME + " - " + index);
      $("#icon_info").html("");
      $("main").attr("data-page", file);
      ctrl_after_pageload();
    });
  } else {
    avviso("Pagina non trovata");
  }
}

function ctrl_after_pageload(){
    tooltip();
    ctrl_datepicker();
    ctrl_selectpicker();
}

//==============================
// OPEN URL
//==============================
function open_url(a){if(a){const b=require("electron").shell;b.openExternal(a)}else return}

function reload(){var a=$("main").attr("data-page");a=a?a:"index";var b="";list_menu.forEach(function(c){c[1]==a&&(b=c[0])}),page(a,b)}

function quit_program(){var a=remote.BrowserWindow();a.close()}

function dev_info(){ avviso_modal("<table style='width:100%'><tr><td style='width:120px'><img src='./assets/IMG/logo_arkas.png' style='height:100px; margin-right:10px'></td><td><strong>Arkas - Alchimia Tecnologica</strong><br>di Cristian Giuseppe Barbato<br>P.IVA 14594091002<br><a href='javascript:void(0)' onclick='open_url(\"https://www.arkastech.it\")'>https://www.arkastech.it</a></td></tr></table>","Arkas"); }

/*=======================================================
 LOADING (testo da mostare)
=======================================================*/
function loading(a=""){if($("#loading").length)$("#loading span").html("<i class=\"far fa-check-circle text-success\" style=\"font-size:80px\"></i>"),$("#loading").fadeOut(500,function(){$("#loading").remove()});else{a=a?a:"Caricamento";var b="<div id=\"loading\" style=\"position:fixed;height:100%;width:100%;background:#ccc;top:0;left:0;z-index:10000;display:flex;flex-direction:column;justify-content:center;align-items:center\"><span><div class=\"spinner-border\" role=\"status\" style=\"font-size:30px;height:80px;width:80px;color:#970c0c\"></div></span><div class=\"loading_text\" style=\"font-size:30px;font-weight:100\">"+a+"</div></div>";$("body").prepend(b)}}

/*=======================================================
 GESTIONE DELLA SESSIONE SESSION(var,val) || session_destroy()
=======================================================*/
function SESSION(a,b=""){return b?void $.session.set(a,b):$.session.get(a)}function session_destroy(){$.session.clear()}

/*=======================================================
 PDF (content,dest)
=======================================================*/
function exportPdf(a,b=""){var c=require("html-pdf");b=b?b:"./new.pdf";var d="";d="<style>",d+="body{ font-family: Helvetica }",d+="</style>",loading("Caricamento"),c.create(d+a,{format:"A4",border:"1cm"}).toFile(b,function(a){if(loading(),a)console.log(a);else{var c="";switch(process.platform){case"darwin":c="open";break;case"win32":c="start";break;case"win64":c="start";break;default:c="xdg-open";}exec(c+" "+b)}})}

//==============================
// ZIP FILE (source,dest,unzip)
//==============================
function createZip(a,b,c=!1){var d=require("adm-zip");if(!0==c){var e=fs.readFileSync(a,"binary"),f=new d;f.addLocalFile(a),f.writeZip(b)}else{var f=new d(a),g=f.getEntries(),e=f.getEntries()[0].getData();fs.writeFileSync(b,e,"binary")}}

/*=======================================================
 AUTOTOOLTIP
=======================================================*/
function tooltip(){$(document).tooltip({track:!0,content:function(){var a=$(this).prop("title");return-1==a.indexOf("tooltip_large")&&$(this).attr("title","<div style=\"max-width:300px\">"+$(this).prop("title")+"</div>"),$(this).prop("title")}})}

/*=======================================================
 MENU
=======================================================*/
$(function(){regola_menu(),$("#menu_background").click(function(){menu()}),$(window).resize(function(){regola_menu()})});
function regola_menu(){$("#menu_content").css("max-height",$(window).height()-54)}function open_menu(a,b=""){page(a,b),menu()}function menu(){if($("#menu").is(":hidden")){for(x in $("#menu_content").html(""),list_menu)$("#menu_content").append("<a href=\"javascript:void(0)\" onclick=\"open_menu('"+list_menu[x][1]+"','"+list_menu[x][0]+"')\" class=\"rounded-0 list-group-item list-group-item-action\">"+list_menu[x][0]+"</a>");menu_focus_link(),$("#menu").show(),$("#menu_background").show(),$("#menu").animate({right:"0px"},300)}else $("#menu").animate({right:"-"+$("#menu").width()},300,function(){$("#menu").hide(),$("#menu_background").hide()})}function menu_focus_link(){var a=$("#title").html(),b="";$("#menu_content a").removeClass("active");for(var c=$("#menu_content a").length,d=0;d<c;d++)b=$("#menu_content a:eq("+d+")").text().trim(),b==a&&$("#menu_content a:eq("+d+")").addClass("active")}

/*=======================================================
 FORMATTAZIONE
=======================================================*/
function escapeHtml(e,r=0){if(e+="",0==r)return e=e.replace(/\<br\>/g,"\\n").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\n/g," ");for(var t=new DOMParser,a=0;a<10;a++)e=t.parseFromString("<!doctype html><body>"+e,"text/html").body.textContent;return e}

function HEXtoRGBA(a,b=1){var d;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(a))return d=a.substring(1).split(""),3==d.length&&(d=[d[0],d[0],d[1],d[1],d[2],d[2]]),d="0x"+d.join(""),"rgba("+[255&d>>16,255&d>>8,255&d].join(",")+","+b+")";throw new Error("Bad Hex")}

function format(a){return 9>=a?"0"+a:a}

function formatnum(a,b=2,c=",",d=""){a=(a+"").replace(",",".").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g="undefined"==typeof d?",":d,h="undefined"==typeof c?".":c,i="";return i=(f?function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c}(e,f):""+Math.round(e)).split("."),3<i[0].length&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=Array(f-i[1].length+1).join("0")),i.join(h)}

function rand(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a+1))+a}

function max_zindex(b="*"){for(var a=0,c=0,e=0;e<$(b).length;e++)a=parseInt($(b).eq(e).css("z-index")),a>c&&(c=a);return c}

/*=======================================================
 CLIPBOARD
=======================================================*/
function copyClip(a,b=""){""==b&&(b="Il testo Ã¨ stato copiato negli appunti");$("<input id=\"temp\">").val(a).appendTo("body").select();document.execCommand("copy"),$("#temp").remove(),b&&avviso(b,"success")}

/*=======================================================
 CONVERSIONE DEI COLORI
=======================================================*/
function HEXtoRGBA(a,b=1){var d;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(a))return d=a.substring(1).split(""),3==d.length&&(d=[d[0],d[0],d[1],d[1],d[2],d[2]]),d="0x"+d.join(""),"rgba("+[255&d>>16,255&d>>8,255&d].join(",")+","+b+")";throw new Error("Bad Hex")}

/*=======================================================
 GESTIONE DELLE DATE
=======================================================*/
function date(b,d){var g,h,j=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],k=/\\?(.?)/gi,l=function(a,b){return h[a]?h[a]():b},i=function(a,b){for(a=a+"";a.length<b;)a="0"+a;return a};h={d:function(){return i(h.j(),2)},D:function(){return h.l().slice(0,3)},j:function(){return g.getDate()},l:function(){return j[h.w()]+"day"},N:function(){return h.w()||7},S:function(){var a=h.j(),b=a%10;return 3>=b&&1===parseInt(a%100/10,10)&&(b=0),["st","nd","rd"][b-1]||"th"},w:function(){return g.getDay()},z:function(){var a=new Date(h.Y(),h.n()-1,h.j()),b=new Date(h.Y(),0,1);return Math.round((a-b)/864e5)},W:function(){var a=new Date(h.Y(),h.n()-1,h.j()-h.N()+3),b=new Date(a.getFullYear(),0,4);return i(1+Math.round((a-b)/864e5/7),2)},F:function(){return j[6+h.n()]},m:function(){return i(h.n(),2)},M:function(){return h.F().slice(0,3)},n:function(){return g.getMonth()+1},t:function(){return new Date(h.Y(),h.n(),0).getDate()},L:function(){var a=h.Y();return 0==a%4&0!=a%100|0==a%400},o:function(){var a=h.n(),b=h.W();return h.Y()+(12===a&&9>b?1:1===a&&9<b?-1:0)},Y:function(){return g.getFullYear()},y:function(){return h.Y().toString().slice(-2)},a:function(){return 11<g.getHours()?"pm":"am"},A:function(){return h.a().toUpperCase()},B:function(){var a=3600*g.getUTCHours(),b=60*g.getUTCMinutes(),c=g.getUTCSeconds();return i(Math.floor((a+b+c+3600)/86.4)%1e3,3)},g:function(){return h.G()%12||12},G:function(){return g.getHours()},h:function(){return i(h.g(),2)},H:function(){return i(h.G(),2)},i:function(){return i(g.getMinutes(),2)},s:function(){return i(g.getSeconds(),2)},u:function(){return i(1e3*g.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(h.Y(),0)-Date.UTC(h.Y(),0)==new Date(h.Y(),6)-Date.UTC(h.Y(),6)?0:1},O:function(){var a=g.getTimezoneOffset(),b=Math.abs(a);return(0<a?"-":"+")+i(100*Math.floor(b/60)+b%60,4)},P:function(){var a=h.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-g.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(k,l)},r:function(){return"D, d M Y H:i:s O".replace(k,l)},U:function(){return 0|g/1e3}};var c,m;return c=b,g=void 0===(m=d)?new Date:m instanceof Date?new Date(m):new Date(1e3*m),c.replace(k,l)}

function now(a=""){return a?date("Y-m-d H:i:s",parseInt(a)):date("Y-m-d H:i:s")}

function timestamp(a=""){var b=0;if(!a)b=mktime();else if(-1!=a.indexOf(" - ")){var c=a.split(" - "),d=c[0].split("/"),e=c[1].split(":");b=mktime(e[0],e[1],0,d[1],d[0],d[2])}else if(-1!=a.indexOf(" ")){var c=a.split(" "),d=c[0].split("-"),e=c[1].split(":");b=mktime(e[0],e[1],e[2],d[1],d[2],d[0])}else{var c=a.split("/");b=mktime(0,0,0,c[1],c[0],c[2])}return parseInt(b)}

function standardDate(a=""){if(a){if(-1==a.indexOf(" - ")){var b=a.split("/");return a=mktime(0,0,0,b[1],b[0],b[2]),a=date("Y-m-d H:i:s",a),a}var b=a.split(" - "),c=b[0].split("/"),d=b[1].split(":");return a=mktime(d[0],d[1],0,c[1],c[0],c[2]),a=date("Y-m-d H:i:s",a),a}return date("Y-m-d H:i:s")}

function italyDate(a="",b=0){if(a&&"-1"!=a.indexOf(":")){var c=a.split(" "),d=c[0].split("-"),e=c[1].split(":");return b?date("d/m/Y - H:i",mktime(e[0],e[1],e[2],d[1],d[2],d[0])):date("d/m/Y",mktime(e[0],e[1],e[2],d[1],d[2],d[0]))}return""}

function date_diff(a,b,c="giorni"){var d=timestamp(b),e=timestamp(a),f=e-d;return"giorni"==c?(f/=86400,Math.round(f)):(f/=60,mtoh(f))}

function timeToObj(time){
  var date = new Date(time * 1000);
  return date;
}

function mktime(hour=date("H"),minutes=date("i"),seconds=date("s"),month=date("n"),day=date("d"),year=date("Y")) {
  return new Date(year, month - 1, day, hour, minutes, seconds, 0).getTime() / 1000;
}

/*=======================================================
 MINUTI TO ORE (minuti, full)
=======================================================*/
function mtoh(a,b=!1){if(!0==b){var c=60*a,e=Math.floor(c/24/60/60),f=Math.floor(c-86400*e),g=Math.floor(f/3600),i=Math.floor(f-3600*g),j=Math.floor(i/60),k=c%60;return e=10>e?"0"+e:e,g=10>g?"0"+g:g,j=10>j?"0"+j:j,k=10>k?"0"+k:k,e+":"+g+":"+j+":"+k}var g=Math.floor(a/60),j=Math.round(a%60);return g=10>g?"0"+g:g,j=10>j?"0"+j:j,g+":"+j}

function htom(a){a=a.split(":");var b=60*parseInt(a[0]),c=parseInt(a[1]);return b+c}

function mese(a){return["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"][a-1]}

function week(a){return["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato","Domenica"][a]}

/*=======================================================
 AVVISO (testo,colore)
=======================================================*/
function avviso(a,b="danger"){$("body").prepend("<div id='avvisi'></div>"),"danger"==b?a="<i class=\"fas fa-exclamation-triangle mr-2\"></i>"+a:"success"==b&&(a="<i class=\"fas fa-check mr-2\"></i>"+a),$("#avvisi").html("<div class=\"alert alert-"+b+" alert-dismissible fade show fixed-top m-2\" role=\"alert\">"+a+"<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\"><i class=\"fas fa-times\"></i></span></button></div>"),$("#avvisi").fadeIn(),setTimeout(function(){$("#avvisi").fadeOut(function(){$("#avvisi").remove()})},4e3)}
function avviso_modal(a,b="Errore"){$("#avviso_modal").modal("hide");var c="<div class=\"modal fade\" id=\"avviso_modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">";c+="<div class=\"modal-dialog modal-dialog-centered\" role=\"document\">",c+="<div class=\"modal-content\">",c+="<div class=\"modal-header pl-3 pr-3 pt-1 pb-1\">",c+="<h5 class=\"modal-title\">"+b+"</h5>",c+="<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">",c+="<span aria-hidden=\"true\">&times;</span>",c+="</button>",c+="</div>",c+="<div class=\"modal-body\">"+a+"</div>",c+="<div class=\"modal-footer pl-3 pr-3 pt-1 pb-1\">",c+="<button type=\"button\" class=\"btn btn-danger btn-sm mr-auto\" data-dismiss=\"modal\">Chiudi</button>",c+="</div></div></div></div>",$("#avviso_modal").length?($("#avviso_modal .modal-title").html(b),$("#avviso_modal .modal-body").html(a)):$("body").append(c),$("#avviso_modal").modal("show")}

/*=======================================================
 CRIPTAZIONE (testo,cripto/decripto,pwd)
=======================================================*/
function cripto(a="",b=0,c="p455w0Rd"){if(0==b){var d=CryptoJS.AES.encrypt(a,c);return a=d.toString(),a=a.replace(/\=/g,"x8x8x7x"),a=a.replace(/\//g,"x8x8x8x"),a=a.replace(/\+/g,"x8x8x9x"),a}a=a.replace(/x8x8x7x/g,"="),a=a.replace(/x8x8x8x/g,"/"),a=a.replace(/x8x8x9x/g,"+");var d=CryptoJS.AES.decrypt(a,c);return a=d.toString(CryptoJS.enc.Utf8),a}
var CryptoJS=CryptoJS||function(c){function r(){}var t={},e=t.lib={},i=e.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=e.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||o).stringify(this)},concat:function(t){var e=this.words,r=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var n=0;n<t;n++)e[i+n>>>2]|=(r[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%4*8;else if(65535<r.length)for(n=0;n<t;n+=4)e[i+n>>>2]=r[n>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=c.ceil(e/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*c.random()|0);return new a.init(e,t)}}),n=t.enc={},o=n.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],i=0;i<t;i++){var n=e[i>>>2]>>>24-i%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i+=2)r[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new a.init(r,e/2)}},s=n.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],i=0;i<t;i++)r.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new a.init(r,e)}},f=n.Utf8={stringify:function(t){try{return decodeURIComponent(escape(s.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return s.parse(unescape(encodeURIComponent(t)))}},h=e.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,i=e.sigBytes,n=this.blockSize,o=i/(4*n);if(t=(o=t?c.ceil(o):c.max((0|o)-this._minBufferSize,0))*n,i=c.min(4*t,i),t){for(var s=0;s<t;s+=n)this._doProcessBlock(r,s);s=r.splice(0,t),e.sigBytes-=i}return new a.init(s,i)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});e.Hasher=h.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new u.HMAC.init(r,e).finalize(t)}}});var u=t.algo={};return t}(Math);!function(){var a=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,i=this._map;t.clamp(),t=[];for(var n=0;n<r;n+=3)for(var o=(e[n>>>2]>>>24-n%4*8&255)<<16|(e[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e[n+2>>>2]>>>24-(n+2)%4*8&255,s=0;s<4&&n+.75*s<r;s++)t.push(i.charAt(o>>>6*(3-s)&63));if(e=i.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map;!(i=r.charAt(64))||-1!=(i=t.indexOf(i))&&(e=i);for(var i=[],n=0,o=0;o<e;o++)if(o%4){var s=r.indexOf(t.charAt(o-1))<<o%4*2,c=r.indexOf(t.charAt(o))>>>6-o%4*2;i[n>>>2]|=(s|c)<<24-n%4*8,n++}return a.create(i,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(o){function m(t,e,r,i,n,o,s){return((t=t+(e&r|~e&i)+n+s)<<o|t>>>32-o)+e}function z(t,e,r,i,n,o,s){return((t=t+(e&i|r&~i)+n+s)<<o|t>>>32-o)+e}function C(t,e,r,i,n,o,s){return((t=t+(e^r^i)+n+s)<<o|t>>>32-o)+e}function w(t,e,r,i,n,o,s){return((t=t+(r^(e|~i))+n+s)<<o|t>>>32-o)+e}for(var t=CryptoJS,e=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,D=[],n=0;n<64;n++)D[n]=4294967296*o.abs(o.sin(n+1))|0;i=i.MD5=r.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var i=t[n=e+r];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}r=this._hash.words;var n=t[e+0],o=(i=t[e+1],t[e+2]),s=t[e+3],c=t[e+4],a=t[e+5],f=t[e+6],h=t[e+7],u=t[e+8],p=t[e+9],d=t[e+10],l=t[e+11],y=t[e+12],_=t[e+13],v=t[e+14],g=t[e+15],B=m(B=r[0],k=r[1],x=r[2],S=r[3],n,7,D[0]),S=m(S,B,k,x,i,12,D[1]),x=m(x,S,B,k,o,17,D[2]),k=m(k,x,S,B,s,22,D[3]);B=m(B,k,x,S,c,7,D[4]),S=m(S,B,k,x,a,12,D[5]),x=m(x,S,B,k,f,17,D[6]),k=m(k,x,S,B,h,22,D[7]),B=m(B,k,x,S,u,7,D[8]),S=m(S,B,k,x,p,12,D[9]),x=m(x,S,B,k,d,17,D[10]),k=m(k,x,S,B,l,22,D[11]),B=m(B,k,x,S,y,7,D[12]),S=m(S,B,k,x,_,12,D[13]),x=m(x,S,B,k,v,17,D[14]),B=z(B,k=m(k,x,S,B,g,22,D[15]),x,S,i,5,D[16]),S=z(S,B,k,x,f,9,D[17]),x=z(x,S,B,k,l,14,D[18]),k=z(k,x,S,B,n,20,D[19]),B=z(B,k,x,S,a,5,D[20]),S=z(S,B,k,x,d,9,D[21]),x=z(x,S,B,k,g,14,D[22]),k=z(k,x,S,B,c,20,D[23]),B=z(B,k,x,S,p,5,D[24]),S=z(S,B,k,x,v,9,D[25]),x=z(x,S,B,k,s,14,D[26]),k=z(k,x,S,B,u,20,D[27]),B=z(B,k,x,S,_,5,D[28]),S=z(S,B,k,x,o,9,D[29]),x=z(x,S,B,k,h,14,D[30]),B=C(B,k=z(k,x,S,B,y,20,D[31]),x,S,a,4,D[32]),S=C(S,B,k,x,u,11,D[33]),x=C(x,S,B,k,l,16,D[34]),k=C(k,x,S,B,v,23,D[35]),B=C(B,k,x,S,i,4,D[36]),S=C(S,B,k,x,c,11,D[37]),x=C(x,S,B,k,h,16,D[38]),k=C(k,x,S,B,d,23,D[39]),B=C(B,k,x,S,_,4,D[40]),S=C(S,B,k,x,n,11,D[41]),x=C(x,S,B,k,s,16,D[42]),k=C(k,x,S,B,f,23,D[43]),B=C(B,k,x,S,p,4,D[44]),S=C(S,B,k,x,y,11,D[45]),x=C(x,S,B,k,g,16,D[46]),B=w(B,k=C(k,x,S,B,o,23,D[47]),x,S,n,6,D[48]),S=w(S,B,k,x,h,10,D[49]),x=w(x,S,B,k,v,15,D[50]),k=w(k,x,S,B,a,21,D[51]),B=w(B,k,x,S,y,6,D[52]),S=w(S,B,k,x,s,10,D[53]),x=w(x,S,B,k,d,15,D[54]),k=w(k,x,S,B,i,21,D[55]),B=w(B,k,x,S,u,6,D[56]),S=w(S,B,k,x,g,10,D[57]),x=w(x,S,B,k,f,15,D[58]),k=w(k,x,S,B,_,21,D[59]),B=w(B,k,x,S,c,6,D[60]),S=w(S,B,k,x,l,10,D[61]),x=w(x,S,B,k,o,15,D[62]),k=w(k,x,S,B,p,21,D[63]);r[0]=r[0]+B|0,r[1]=r[1]+k|0,r[2]=r[2]+x|0,r[3]=r[3]+S|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32;var n=o.floor(r/4294967296);for(e[15+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,r=0;r<4;r++)i=e[r],e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),t.MD5=r._createHelper(i),t.HmacMD5=r._createHmacHelper(i)}(Math),function(){var t,e=CryptoJS,r=(t=e.lib).Base,f=t.WordArray,i=(t=e.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=(s=this.cfg).hasher.create(),i=f.create(),n=i.words,o=s.keySize,s=s.iterations;n.length<o;){c&&r.update(c);var c=r.update(t).finalize(e);r.reset();for(var a=1;a<s;a++)c=r.finalize(c),r.reset();i.concat(c)}return i.sigBytes=4*o,i}});e.EvpKDF=function(t,e,r){return i.create(r).compute(t,e)}}(),CryptoJS.lib.Cipher||function(){var t=(p=CryptoJS).lib,e=t.Base,s=t.WordArray,r=t.BufferedBlockAlgorithm,i=p.enc.Base64,n=p.algo.EvpKDF,o=t.Cipher=r.extend({cfg:e.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(i){return{encrypt:function(t,e,r){return("string"==typeof e?d:u).encrypt(i,t,e,r)},decrypt:function(t,e,r){return("string"==typeof e?d:u).decrypt(i,t,e,r)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function c(t,e,r){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var n=0;n<r;n++)t[e+n]^=i[n]}var a=p.mode={},f=(t.BlockCipherMode=e.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;c.call(this,t,e,i),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),f.Decryptor=f.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,n=t.slice(e,e+i);r.decryptBlock(t,e),c.call(this,t,e,i),this._prevBlock=n}}),a=a.CBC=f,f=(p.pad={}).Pkcs7={pad:function(t,e){for(var r,i=(r=(r=4*e)-t.sigBytes%r)<<24|r<<16|r<<8|r,n=[],o=0;o<r;o+=4)n.push(i);r=s.create(n,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:a,padding:f}),reset:function(){o.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=t.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),u=(a=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?s.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e=(t=i.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=s.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:r})}},t.SerializableCipher=e.extend({cfg:e.extend({format:a}),encrypt:function(t,e,r,i){i=this.cfg.extend(i);var n=t.createEncryptor(r,i);return e=n.finalize(e),n=n.cfg,h.create({ciphertext:e,key:r,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,r,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(r,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,r,i){return i=i||s.random(8),t=n.create({keySize:e+r}).compute(t,i),r=s.create(t.words.slice(e),4*r),t.sigBytes=4*e,h.create({key:t,iv:r,salt:i})}},d=t.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:p}),encrypt:function(t,e,r,i){return r=(i=this.cfg.extend(i)).kdf.execute(r,t.keySize,t.ivSize),i.iv=r.iv,(t=u.encrypt.call(this,t,e,r.key,i)).mixIn(r),t},decrypt:function(t,e,r,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),r=i.kdf.execute(r,t.keySize,t.ivSize,e.salt),i.iv=r.iv,u.decrypt.call(this,t,e,r.key,i)}})}(),function(){for(var t=CryptoJS,e=t.lib.BlockCipher,r=t.algo,s=[],i=[],n=[],o=[],c=[],a=[],f=[],h=[],u=[],p=[],d=[],l=0;l<256;l++)d[l]=l<128?l<<1:l<<1^283;var y=0,_=0;for(l=0;l<256;l++){var v=(v=_^_<<1^_<<2^_<<3^_<<4)>>>8^255&v^99;s[y]=v;var g=d[i[v]=y],B=d[g],S=d[B],x=257*d[v]^16843008*v;n[y]=x<<24|x>>>8,o[y]=x<<16|x>>>16,c[y]=x<<8|x>>>24,a[y]=x,x=16843009*S^65537*B^257*g^16843008*y,f[v]=x<<24|x>>>8,h[v]=x<<16|x>>>16,u[v]=x<<8|x>>>24,p[v]=x,y?(y=g^d[d[d[S^g]]],_^=d[d[_]]):y=_=1}var k=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),i=this._keySchedule=[],n=0;n<r;n++)if(n<e)i[n]=t[n];else{var o=i[n-1];n%e?6<e&&4==n%e&&(o=s[o>>>24]<<24|s[o>>>16&255]<<16|s[o>>>8&255]<<8|s[255&o]):(o=s[(o=o<<8|o>>>24)>>>24]<<24|s[o>>>16&255]<<16|s[o>>>8&255]<<8|s[255&o],o^=k[n/e|0]<<24),i[n]=i[n-e]^o}for(t=this._invKeySchedule=[],e=0;e<r;e++)n=r-e,o=e%4?i[n]:i[n-4],t[e]=e<4||n<=4?o:f[s[o>>>24]]^h[s[o>>>16&255]]^u[s[o>>>8&255]]^p[s[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,n,o,c,a,s)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,f,h,u,p,i),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,i,n,o,s,c){for(var a=this._nRounds,f=t[e]^r[0],h=t[e+1]^r[1],u=t[e+2]^r[2],p=t[e+3]^r[3],d=4,l=1;l<a;l++){var y=i[f>>>24]^n[h>>>16&255]^o[u>>>8&255]^s[255&p]^r[d++],_=i[h>>>24]^n[u>>>16&255]^o[p>>>8&255]^s[255&f]^r[d++],v=i[u>>>24]^n[p>>>16&255]^o[f>>>8&255]^s[255&h]^r[d++];p=i[p>>>24]^n[f>>>16&255]^o[h>>>8&255]^s[255&u]^r[d++],f=y,h=_,u=v}y=(c[f>>>24]<<24|c[h>>>16&255]<<16|c[u>>>8&255]<<8|c[255&p])^r[d++],_=(c[h>>>24]<<24|c[u>>>16&255]<<16|c[p>>>8&255]<<8|c[255&f])^r[d++],v=(c[u>>>24]<<24|c[p>>>16&255]<<16|c[f>>>8&255]<<8|c[255&h])^r[d++],p=(c[p>>>24]<<24|c[f>>>16&255]<<16|c[h>>>8&255]<<8|c[255&u])^r[d++],t[e]=y,t[e+1]=_,t[e+2]=v,t[e+3]=p},keySize:8});t.AES=e._createHelper(r)}();
function md5(text){text=text.toString(); return CryptoJS.MD5(text).toString()}

/*=======================================================
 TIMEPICKER
=======================================================*/
!function(a){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],a):a(jQuery)}(function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"@@version"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Adesso",closeText:"Fatto",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Orario",hourText:"Ore",minuteText:"Minuti",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_newInst:function($input,opts){var overrides,i,tp_inst=new Timepicker,inlineSettings={},fns={};for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(a){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(a,b){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],a,b,tp_inst)},onChangeMonthYear:function(a,b,c){$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],a,b,c,tp_inst)},onClose:function(a,b){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(b),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],a,b,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||this._defaults[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(a){return a.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(a){return a.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&void 0===$.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(0<tzl&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null===tp_inst._defaults.timezone?-1*new Date().getTimezoneOffset():$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField),!0===tp_inst._defaults.altRedirectFocus&&tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(a){var b=$.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(b),this._limitMinMaxDateTime(a,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(a,b){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),b||!this._defaults.timeOnly){var c=$.datepicker._get(this.inst,"dateFormat");try{var d=parseDateTimeInternal(c,this._defaults.timeFormat,a,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!d.timeObj)return!1;$.extend(this,d.timeObj)}catch(b){return $.timepicker.log("Error parsing the date/time string: "+b+"\ndate/time string = "+a+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+c),!1}return!0}var e=$.datepicker.parseTime(this._defaults.timeFormat,a,this._defaults);return!!e&&($.extend(this,e),!0)},_afterInject:function(){var a=this.inst.settings;$.isFunction(a.afterInject)&&a.afterInject.call(this)},_injectTimePicker:function(){var b=this.inst.dpDiv,e=this.inst.settings,j=this,i="",m="",q=null,t={},r={},l=null,w=0,x=0;if(0===b.find("div.ui-timepicker-div").length&&e.showTimepicker){var y="<div class=\"ui-timepicker-div"+(e.isRTL?" ui-timepicker-rtl":"")+(e.oneLine&&"select"===e.controlType?" ui-timepicker-oneLine":"")+"\"><dl><dt class=\"ui_tpicker_time_label"+(e.showTime?"":" ui_tpicker_unit_hide")+"\">"+e.timeText+"</dt><dd class=\"ui_tpicker_time "+(e.showTime?"":" ui_tpicker_unit_hide")+"\"><input class=\"ui_tpicker_time_input\"/></dd>";for(w=0,x=this.units.length;w<x;w++){if(q=null===e["show"+(m=(i=this.units[w]).substr(0,1).toUpperCase()+i.substr(1))]?this.support[i]:e["show"+m],t[i]=parseInt(e[i+"Max"]-(e[i+"Max"]-e[i+"Min"])%e["step"+m],10),r[i]=0,y+="<dt class=\"ui_tpicker_"+i+"_label"+(q?"":" ui_tpicker_unit_hide")+"\">"+e[i+"Text"]+"</dt><dd class=\"ui_tpicker_"+i+(q?"":" ui_tpicker_unit_hide")+"\"><div class=\"ui_tpicker_"+i+"_slider"+(q?"":" ui_tpicker_unit_hide")+"\"></div>",q&&0<e[i+"Grid"]){if(y+="<div style=\"padding-left: 1px\"><table class=\"ui-tpicker-grid-label\"><tr>","hour"===i)for(var z=e[i+"Min"];z<=t[i];z+=parseInt(e[i+"Grid"],10)){r[i]++;var A=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:z},e);y+="<td data-for=\""+i+"\">"+A+"</td>"}else for(var p=e[i+"Min"];p<=t[i];p+=parseInt(e[i+"Grid"],10))r[i]++,y+="<td data-for=\""+i+"\">"+(10>p?"0":"")+p+"</td>";y+="</tr></table></div>"}y+="</dd>"}var B=null===e.showTimezone?this.support.timezone:e.showTimezone;y+="<dt class=\"ui_tpicker_timezone_label"+(B?"":" ui_tpicker_unit_hide")+"\">"+e.timezoneText+"</dt>",y+="<dd class=\"ui_tpicker_timezone"+(B?"":" ui_tpicker_unit_hide")+"\"></dd>";var C=$(y+="</dl></div>");for(!0===e.timeOnly&&(C.prepend("<div class=\"ui-widget-header ui-helper-clearfix ui-corner-all\"><div class=\"ui-datepicker-title\">"+e.timeOnlyTitle+"</div></div>"),b.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),w=0,x=j.units.length;w<x;w++)q=null===e["show"+(m=(i=j.units[w]).substr(0,1).toUpperCase()+i.substr(1))]?this.support[i]:e["show"+m],j[i+"_slider"]=j.control.create(j,C.find(".ui_tpicker_"+i+"_slider"),i,j[i],e[i+"Min"],t[i],e["step"+m]),q&&0<e[i+"Grid"]&&(l=100*r[i]*e[i+"Grid"]/(t[i]-e[i+"Min"]),C.find(".ui_tpicker_"+i+" table").css({width:l+"%",marginLeft:e.isRTL?"0":l/(-2*r[i])+"%",marginRight:e.isRTL?l/(-2*r[i])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var b=$(this),c=b.html(),d=parseInt(c.replace(/[^0-9]/g),10),e=c.replace(/[^apm]/gi),f=b.data("for");"hour"===f&&(-1!==e.indexOf("p")&&12>d?d+=12:-1!==e.indexOf("a")&&12==d&&(d=0)),j.control.value(j,j[f+"_slider"],i,d),j._onTimeChange(),j._onSelectHandler()}).css({cursor:"pointer",width:100/r[i]+"%",textAlign:"center",overflow:"hidden"}));(this.timezone_select=C.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(e.timezoneList,function(a){return $("<option />").val("object"==typeof a?a.value:a).text("object"==typeof a?a.label:a)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)?-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(j):this.timezone_select.val(this.timezone):void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(e.timezone):selectLocalTimezone(j),this.timezone_select.change(function(){j._onTimeChange(),j._onSelectHandler(),j._afterInject()});var g=b.find(".ui-datepicker-buttonpane");if(g.length?g.before(C):b.append(C),this.$timeObj=C.find(".ui_tpicker_time_input"),this.$timeObj.change(function(){var a=j.inst.settings.timeFormat,b=$.datepicker.parseTime(a,this.value),c=new Date;b?(c.setHours(b.hour),c.setMinutes(b.minute),c.setSeconds(b.second),$.datepicker._setTime(j.inst,c)):(this.value=j.formattedTime,this.blur())}),null!==this.inst){var D=this.timeDefined;this._onTimeChange(),this.timeDefined=D}if(this._defaults.addSliderAccess){var v=this._defaults.sliderAccessArgs,k=this._defaults.isRTL;v.isRTL=k,setTimeout(function(){if(0===C.find(".ui-slider-access").length){C.find(".ui-slider:visible").sliderAccess(v);var a=C.find(".ui-slider-access:eq(0)").outerWidth(!0);a&&C.find("table:visible").each(function(){var b=$(this),c=b.outerWidth(),d=b.css(k?"marginRight":"marginLeft").toString().replace("%",""),e=c-a,f={width:e,marginRight:0,marginLeft:0};f[k?"marginRight":"marginLeft"]=d*e/c+"%",b.css(f)})}},10)}j._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(b,e){var f=this._defaults,g=new Date(b.selectedYear,b.selectedMonth,b.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(b,"minDateTime")&&void 0!==$.datepicker._get(b,"minDateTime")&&g){var i=$.datepicker._get(b,"minDateTime"),j=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=f.hourMin,this.minuteMinOriginal=f.minuteMin,this.secondMinOriginal=f.secondMin,this.millisecMinOriginal=f.millisecMin,this.microsecMinOriginal=f.microsecMin),b.settings.timeOnly||j.getTime()===g.getTime()?(this._defaults.hourMin=i.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=i.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=i.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=i.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=i.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(b,"maxDateTime")&&void 0!==$.datepicker._get(b,"maxDateTime")&&g){var a=$.datepicker._get(b,"maxDateTime"),k=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=f.hourMax,this.minuteMaxOriginal=f.minuteMax,this.secondMaxOriginal=f.secondMax,this.millisecMaxOriginal=f.millisecMax,this.microsecMaxOriginal=f.microsecMax),b.settings.timeOnly||k.getTime()===g.getTime()?(this._defaults.hourMax=a.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=a.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=a.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=a.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=a.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(null!==b.settings.minTime){var l=new Date("01/01/1970 "+b.settings.minTime);this.hour<l.getHours()?(this.hour=this._defaults.hourMin=l.getHours(),this.minute=this._defaults.minuteMin=l.getMinutes()):this.hour===l.getHours()&&this.minute<l.getMinutes()?this.minute=this._defaults.minuteMin=l.getMinutes():this._defaults.hourMin<l.getHours()?(this._defaults.hourMin=l.getHours(),this._defaults.minuteMin=l.getMinutes()):this._defaults.hourMin===l.getHours()===this.hour&&this._defaults.minuteMin<l.getMinutes()?this._defaults.minuteMin=l.getMinutes():this._defaults.minuteMin=0}if(null!==b.settings.maxTime){var n=new Date("01/01/1970 "+b.settings.maxTime);this.hour>n.getHours()?(this.hour=this._defaults.hourMax=n.getHours(),this.minute=this._defaults.minuteMax=n.getMinutes()):this.hour===n.getHours()&&this.minute>n.getMinutes()?this.minute=this._defaults.minuteMax=n.getMinutes():this._defaults.hourMax>n.getHours()?(this._defaults.hourMax=n.getHours(),this._defaults.minuteMax=n.getMinutes()):this._defaults.hourMax===n.getHours()===this.hour&&this._defaults.minuteMax>n.getMinutes()?this._defaults.minuteMax=n.getMinutes():this._defaults.minuteMax=59}if(void 0!==e&&!0===e){var c=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),o=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),m=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),d=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),h=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:c,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:o,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:m,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:d,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:h,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var b=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),f=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),g=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),h=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),j=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),k=!!this.timezone_select&&this.timezone_select.val(),p=this._defaults,q=p.pickerTimeFormat||p.timeFormat,l=p.pickerTimeSuffix||p.timeSuffix;"object"==typeof b&&(b=!1),"object"==typeof f&&(f=!1),"object"==typeof g&&(g=!1),"object"==typeof h&&(h=!1),"object"==typeof j&&(j=!1),"object"==typeof k&&(k=!1),!1!==b&&(b=parseInt(b,10)),!1!==f&&(f=parseInt(f,10)),!1!==g&&(g=parseInt(g,10)),!1!==h&&(h=parseInt(h,10)),!1!==j&&(j=parseInt(j,10)),!1!==k&&(k=k.toString());var o=p[12>b?"amNames":"pmNames"][0],c=b!==parseInt(this.hour,10)||f!==parseInt(this.minute,10)||g!==parseInt(this.second,10)||h!==parseInt(this.millisec,10)||j!==parseInt(this.microsec,10)||0<this.ampm.length&&12>b!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&k!==this.timezone.toString();if(c&&(!1!==b&&(this.hour=b),!1!==f&&(this.minute=f),!1!==g&&(this.second=g),!1!==h&&(this.millisec=h),!1!==j&&(this.microsec=j),!1!==k&&(this.timezone=k),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=o),this.formattedTime=$.datepicker.formatTime(p.timeFormat,this,p),this.$timeObj&&(q===p.timeFormat?this.$timeObj.val(this.formattedTime+l):this.$timeObj.val($.datepicker.formatTime(q,this,p)+l),this.$timeObj[0].setSelectionRange)){var r=this.$timeObj[0].selectionStart,m=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(r,m)}this.timeDefined=!0,c&&this._updateDateTime()}},_onSelectHandler:function(){var a=this._defaults.onSelect||this.inst.settings.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_updateDateTime:function(b){var d=0<(b=this.inst||b).currentYear?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(b.selectedYear,b.selectedMonth,b.selectedDay),f=$.datepicker._daylightSavingAdjust(d),g=$.datepicker._get(b,"dateFormat"),h=$.datepicker._getFormatConfig(b),i=null!==f&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(g,null===f?new Date:f,h);var a=this.formattedDate;if(!(""===b.lastVal&&(b.currentYear=b.selectedYear,b.currentMonth=b.selectedMonth,b.currentDay=b.selectedDay),!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate?a=this.formattedTime:(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||i)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)&&(a+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=a,this._defaults.showTimepicker))this.$input.val(this.formattedDate);else if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(a);var j="",k=null===this._defaults.altSeparator?this._defaults.separator:this._defaults.altSeparator,m=null===this._defaults.altTimeSuffix?this._defaults.timeSuffix:this._defaults.altTimeSuffix;this._defaults.timeOnly||(j=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===f?new Date:f,h):this.formattedDate)&&(j+=k),j+=null===this._defaults.altTimeFormat?this.formattedTime+m:$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+m,this.$altInput.val(j)}else this.$input.val(a);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var a=$.datepicker._getInst(this.$input.get(0)),b=$.datepicker._get(a,"timepicker");if(b&&b._defaults.timeOnly&&a.input.val()!==a.lastVal)try{$.datepicker._updateDatepicker(a)}catch(a){$.timepicker.log(a)}}},_controls:{slider:{create:function(b,c,d,e,f,g,a){var h=b._defaults.isRTL;return c.prop("slide",null).slider({orientation:"horizontal",value:h?-1*e:e,min:h?-1*g:f,max:h?-1*f:g,step:a,slide:function(a,c){b.control.value(b,$(this),d,h?-1*c.value:c.value),b._onTimeChange()},stop:function(){b._onSelectHandler()}})},options:function(b,c,d,e,f){if(b._defaults.isRTL){if("string"==typeof e)return"min"===e||"max"===e?void 0===f?Math.abs(c.slider(e)):c.slider(e,-1*f):c.slider(e);var g=e.min,a=e.max;return e.min=e.max=null,void 0!==g&&(e.max=-1*g),void 0!==a&&(e.min=-1*a),c.slider(e)}return"string"==typeof e&&void 0!==f?c.slider(e,f):c.slider(e)},value:function(a,b,c,d){return a._defaults.isRTL?void 0===d?Math.abs(b.slider("value")):b.slider("value",-1*d):void 0===d?b.slider("value"):b.slider("value",d)}},select:{create:function(b,d,e,f,g,h,a){for(var i="<select class=\"ui-timepicker-select ui-state-default ui-corner-all\" data-unit=\""+e+"\" data-min=\""+g+"\" data-max=\""+h+"\" data-step=\""+a+"\">",j=b._defaults.pickerTimeFormat||b._defaults.timeFormat,k=g;k<=h;k+=a)i+="<option value=\""+k+"\""+(k===f?" selected":"")+">",i+="hour"===e?$.datepicker.formatTime($.trim(j.replace(/[^ht ]/gi,"")),{hour:k},b._defaults):"millisec"===e||"microsec"===e||10<=k?k:"0"+k.toString(),i+="</option>";return i+="</select>",d.children("select").remove(),$(i).appendTo(d).change(function(){b._onTimeChange(),b._onSelectHandler(),b._afterInject()}),d},options:function(b,c,d,e,f){var g={},h=c.children("select");if("string"==typeof e){if(void 0===f)return h.data(e);g[e]=f}else g=e;return b.control.create(b,c,h.data("unit"),h.val(),0<=g.min?g.min:h.data("min"),g.max||h.data("max"),g.step||h.data("step"))},value:function(a,b,c,d){var e=b.children("select");return void 0===d?e.val():e.val(d)}}}}),$.fn.extend({timepicker:function(a){a=a||{};var b=Array.prototype.slice.call(arguments);return"object"==typeof a&&(b[0]=$.extend(a,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),b)})},datetimepicker:function(a){var b=arguments;return"string"==typeof(a=a||{})?"getDate"===a||"option"===a&&2===b.length&&"string"==typeof b[1]?$.fn.datepicker.apply($(this[0]),b):this.each(function(){var a=$(this);a.datepicker.apply(a,b)}):this.each(function(){var b=$(this);b.datepicker($.timepicker._newInst(b,a)._defaults)})}}),$.datepicker.parseDateTime=function(b,c,d,e,f){var g=parseDateTimeInternal(b,c,d,e,f);if(g.timeObj){var a=g.timeObj;g.date.setHours(a.hour,a.minute,a.second,a.millisec),g.date.setMicroseconds(a.microsec)}return g.date},$.datepicker.parseTime=function(a,b,c){var d=extendRemove(extendRemove({},$.timepicker._defaults),c||{}),f=(a.replace(/\'.*?\'/g,"").indexOf("Z"),function(b,c,d){var e,f="^"+b.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(b){var c,e,f,g=b.length;switch(b.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===g?"(\\d?\\d)":"(\\d{"+g+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return c=d.amNames,e=d.pmNames,f=[],c&&$.merge(f,c),e&&$.merge(f,e),"("+(f=$.map(f,function(a){return a.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?";default:return"("+b.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(a){return"\\"+a})+")?";}}).replace(/\s/g,"\\s?")+d.timeSuffix+"$",g=function(a){var b=a.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),c={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(b)for(var d=0;d<b.length;d++)-1===c[b[d].toString().charAt(0)]&&(c[b[d].toString().charAt(0)]=d+1);return c}(b),a="",h={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(e=c.match(new RegExp(f,"i")))&&(-1!==g.t&&(void 0===e[g.t]||0===e[g.t].length?(a="",h.ampm=""):(a=-1===$.inArray(e[g.t].toUpperCase(),$.map(d.amNames,function(a){return a.toUpperCase()}))?"PM":"AM",h.ampm=d["AM"==a?"amNames":"pmNames"][0])),-1!==g.h&&("AM"===a&&"12"===e[g.h]?h.hour=0:"PM"===a&&"12"!==e[g.h]?h.hour=parseInt(e[g.h],10)+12:h.hour=+e[g.h]),-1!==g.m&&(h.minute=+e[g.m]),-1!==g.s&&(h.second=+e[g.s]),-1!==g.l&&(h.millisec=+e[g.l]),-1!==g.c&&(h.microsec=+e[g.c]),-1!==g.z&&void 0!==e[g.z]&&(h.timezone=$.timepicker.timezoneOffsetNumber(e[g.z])),h)});return"function"==typeof d.parse?d.parse(a,b,d):"loose"===d.parse?function(a,b,c){try{var d=new Date("2012-01-01 "+b);if(isNaN(d.getTime())&&(d=new Date("2012-01-01T"+b),isNaN(d.getTime())&&(d=new Date("01/01/2012 "+b),isNaN(d.getTime()))))throw"Unable to parse time with native Date: "+b;return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:-1*d.getTimezoneOffset()}}catch(d){try{return f(a,b,c)}catch(c){$.timepicker.log("Unable to parse \ntimeString: "+b+"\ntimeFormat: "+a)}}return!1}(a,b,d):f(a,b,d)},$.datepicker.formatTime=function(b,c,d){d=d||{},d=$.extend({},$.timepicker._defaults,d),c=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},c);var e=b,f=d.amNames[0],g=parseInt(c.hour,10);return 11<g&&(f=d.pmNames[0]),e=e.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(a){return"HH"===a?("0"+g).slice(-2):"H"===a?g:"hh"===a?("0"+convert24to12(g)).slice(-2):"h"===a?convert24to12(g):"mm"===a?("0"+c.minute).slice(-2):"m"===a?c.minute:"ss"===a?("0"+c.second).slice(-2):"s"===a?c.second:"l"===a?("00"+c.millisec).slice(-3):"c"===a?("00"+c.microsec).slice(-3):"z"===a?$.timepicker.timezoneOffsetString(null===c.timezone?d.timezone:c.timezone,!1):"Z"===a?$.timepicker.timezoneOffsetString(null===c.timezone?d.timezone:c.timezone,!0):"T"===a?f.charAt(0).toUpperCase():"TT"===a?f.toUpperCase():"t"===a?f.charAt(0).toLowerCase():"tt"===a?f.toLowerCase():a.replace(/'/g,"")})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(a,b){var c,d=this._getInst($(a)[0]),e=this._get(d,"timepicker");e&&d.settings.showTimepicker?(e._limitMinMaxDateTime(d,!0),c=d.inline,d.inline=d.stay_open=!0,this._base_selectDate(a,b),d.inline=c,d.stay_open=!1,this._notifyChange(d),this._updateDatepicker(d)):this._base_selectDate(a,b)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(a){var b=a.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==a&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==b||"boolean"==typeof a.stay_open&&!1!==a.stay_open)){this._base_updateDatepicker(a);var c=this._get(a,"timepicker");c&&c._addTimePicker(a)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(b){var c=$.datepicker._getInst(b.target),d=$.datepicker._get(c,"timepicker");if(d&&$.datepicker._get(c,"constrainInput")){var e=d.support.ampm,f=null===d._defaults.showTimezone?d.support.timezone:d._defaults.showTimezone,g=$.datepicker._possibleChars($.datepicker._get(c,"dateFormat")),a=d._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,e?"APM":"").replace(/Tt/g,e?"AaPpMm":"").replace(/tT/g,e?"AaPpMm":"").replace(/T/g,e?"AP":"").replace(/tt/g,e?"apm":"").replace(/t/g,e?"ap":"")+" "+d._defaults.separator+d._defaults.timeSuffix+(f?d._defaults.timezoneList.join(""):"")+d._defaults.amNames.join("")+d._defaults.pmNames.join("")+g,h=String.fromCharCode(void 0===b.charCode?b.keyCode:b.charCode);return b.ctrlKey||" ">h||!g||-1<a.indexOf(h)}return $.datepicker._base_doKeyPress(b)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(b){var c=this._get(b,"timepicker");if(c){var d=c._defaults.altField;if(d){c._defaults.altFormat||c._defaults.dateFormat;var e=this._getDate(b),f=$.datepicker._getFormatConfig(b),g="",h=c._defaults.altSeparator?c._defaults.altSeparator:c._defaults.separator,i=c._defaults.altTimeSuffix?c._defaults.altTimeSuffix:c._defaults.timeSuffix,j=null===c._defaults.altTimeFormat?c._defaults.timeFormat:c._defaults.altTimeFormat;g+=$.datepicker.formatTime(j,c,c._defaults)+i,c._defaults.timeOnly||c._defaults.altFieldTimeOnly||null===e||(g=c._defaults.altFormat?$.datepicker.formatDate(c._defaults.altFormat,e,f)+h+g:c.formattedDate+h+g),$(d).val(b.input.val()?g:"")}}else $.datepicker._base_updateAlternate(b)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(a){var b=$.datepicker._getInst(a.target),c=$.datepicker._get(b,"timepicker");if(c&&c._defaults.timeOnly&&b.input.val()!==b.lastVal)try{$.datepicker._updateDatepicker(b)}catch(a){$.timepicker.log(a)}return $.datepicker._base_doKeyUp(a)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(a){var b=this._getInst($(a)[0]);this._base_gotoToday(a);var c=this._get(b,"timepicker");if(c){var d=$.timepicker.timezoneOffsetNumber(c.timezone),e=new Date;e.setMinutes(e.getMinutes()+e.getTimezoneOffset()+parseInt(d,10)),this._setTime(b,e),this._setDate(b,e),c._onSelectHandler()}},$.datepicker._disableTimepickerDatepicker=function(a){var b=this._getInst(a);if(b){var c=this._get(b,"timepicker");$(a).datepicker("getDate"),c&&(b.settings.showTimepicker=!1,c._defaults.showTimepicker=!1,c._updateDateTime(b))}},$.datepicker._enableTimepickerDatepicker=function(a){var b=this._getInst(a);if(b){var c=this._get(b,"timepicker");$(a).datepicker("getDate"),c&&(b.settings.showTimepicker=!0,c._defaults.showTimepicker=!0,c._addTimePicker(b),c._updateDateTime(b))}},$.datepicker._setTime=function(a,b){var c=this._get(a,"timepicker");if(c){var d=c._defaults;c.hour=b?b.getHours():d.hour,c.minute=b?b.getMinutes():d.minute,c.second=b?b.getSeconds():d.second,c.millisec=b?b.getMilliseconds():d.millisec,c.microsec=b?b.getMicroseconds():d.microsec,c._limitMinMaxDateTime(a,!0),c._onTimeChange(),c._updateDateTime(a)}},$.datepicker._setTimeDatepicker=function(b,c,d){var e=this._getInst(b);if(e){var f,g=this._get(e,"timepicker");g&&(this._setDateFromField(e),c&&("string"==typeof c?(g._parseTime(c,d),(f=new Date).setHours(g.hour,g.minute,g.second,g.millisec),f.setMicroseconds(g.microsec)):(f=new Date(c.getTime())).setMicroseconds(c.getMicroseconds()),"Invalid Date"===f.toString()&&(f=void 0),this._setTime(e,f)))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(b,c){var d=this._getInst(b),e=c;if(d){"string"==typeof c&&((e=new Date(c)).getTime()||(this._base_setDateDatepicker.apply(this,arguments),e=$(b).datepicker("getDate")));var f,g=this._get(d,"timepicker");e instanceof Date?(f=new Date(e.getTime())).setMicroseconds(e.getMicroseconds()):f=e,g&&f&&(g.support.timezone||null!==g._defaults.timezone||(g.timezone=-1*f.getTimezoneOffset()),e=$.timepicker.timezoneAdjust(e,$.timepicker.timezoneOffsetString(-e.getTimezoneOffset()),g.timezone),f=$.timepicker.timezoneAdjust(f,$.timepicker.timezoneOffsetString(-f.getTimezoneOffset()),g.timezone)),this._updateDatepicker(d),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(b,f,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(b,c){var d=this._getInst(b);if(d){var e=this._get(d,"timepicker");if(e){void 0===d.lastVal&&this._setDateFromField(d,c);var f=this._getDate(d),g=null;return g=e.$altInput&&e._defaults.altFieldTimeOnly?e.$input.val()+" "+e.$altInput.val():"INPUT"!==e.$input.get(0).tagName&&e.$altInput?e.$altInput.val():e.$input.val(),f&&e._parseTime(g,!d.settings.timeOnly)&&(f.setHours(e.hour,e.minute,e.second,e.millisec),f.setMicroseconds(e.microsec),null!=e.timezone&&(e.support.timezone||null!==e._defaults.timezone||(e.timezone=-1*f.getTimezoneOffset()),f=$.timepicker.timezoneAdjust(f,e.timezone,$.timepicker.timezoneOffsetString(-f.getTimezoneOffset())))),f}return this._base_getDateDatepicker(b,c)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(a,b,c){var d;try{d=this._base_parseDate(a,b,c)}catch(e){if(!(0<=e.indexOf(":")))throw e;d=this._base_parseDate(a,b.substring(0,b.length-(e.length-e.indexOf(":")-2)),c),$.timepicker.log("Error parsing the date string: "+e+"\ndate string = "+b+"\ndate format = "+a)}return d},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(a){var b=this._get(a,"timepicker");return b?(b._updateDateTime(a),b.$input.val()):this._base_formatDate(a)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(b,e,f){var g,i=this._getInst(b);if(!i)return null;var j=this._get(i,"timepicker");if(j){var a,k,n,q,t=null,v=null,w=null,x=j._defaults.evnts,h={};if("string"==typeof e){if("minDate"===e||"minDateTime"===e)t=f;else if("maxDate"===e||"maxDateTime"===e)v=f;else if("onSelect"===e)w=f;else if(x.hasOwnProperty(e)){if(void 0===f)return x[e];h[e]=f,g={}}}else if("object"==typeof e)for(a in e.minDate?t=e.minDate:e.minDateTime?t=e.minDateTime:e.maxDate?v=e.maxDate:e.maxDateTime&&(v=e.maxDateTime),x)x.hasOwnProperty(a)&&e[a]&&(h[a]=e[a]);for(a in h)h.hasOwnProperty(a)&&(x[a]=h[a],g||(g=$.extend({},e)),delete g[a]);if(g&&isEmptyObject(g))return;if(t?(t=0===t?new Date:new Date(t),j._defaults.minDate=t,j._defaults.minDateTime=t):v?(v=0===v?new Date:new Date(v),j._defaults.maxDate=v,j._defaults.maxDateTime=v):w&&(j._defaults.onSelect=w),t||v)return n=(q=$(b)).datetimepicker("getDate"),k=this._base_optionDatepicker.call($.datepicker,b,g||e,f),q.datetimepicker("setDate",n),k}return void 0===f?this._base_optionDatepicker.call($.datepicker,b,e):this._base_optionDatepicker.call($.datepicker,b,g||e,f)};var isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},extendRemove=function(a,b){for(var c in $.extend(a,b),b)null!==b[c]&&void 0!==b[c]||(a[c]=b[c]);return a},detectSupport=function(a){var b=a.replace(/'.*?'/g,"").toLowerCase(),c=function(a,b){return-1!==a.indexOf(b)};return{hour:c(b,"h"),minute:c(b,"m"),second:c(b,"s"),millisec:c(b,"l"),microsec:c(b,"c"),timezone:c(b,"z"),ampm:c(b,"t")&&c(a,"h"),iso8601:c(a,"Z")}},convert24to12=function(a){return 0==(a%=12)&&(a=12),a+""},computeEffectiveSetting=function(a,b){return a&&a[b]?a[b]:$.timepicker._defaults[b]},splitDateTime=function(b,c){var d=computeEffectiveSetting(c,"separator"),e=computeEffectiveSetting(c,"timeFormat").split(d).length,f=b.split(d),g=f.length;return 1<g?{dateString:f.splice(0,g-e).join(d),timeString:f.splice(0,e).join(d)}:{dateString:b,timeString:""}},parseDateTimeInternal=function(b,c,d,e,f){var g,h,i;if(h=splitDateTime(d,f),g=$.datepicker._base_parseDate(b,h.dateString,e),""===h.timeString)return{date:g};if(!(i=$.datepicker.parseTime(c,h.timeString,f)))throw"Wrong time format";return{date:g,timeObj:i}},selectLocalTimezone=function(a,b){if(a&&a.timezone_select){var c=b||new Date;a.timezone_select.val(-c.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(b,c){if(isNaN(b)||840<b||-720>b)return b;var d=b%60,e=c?":":"",f=(0<=b?"+":"-")+("0"+Math.abs((b-d)/60)).slice(-2)+e+("0"+Math.abs(d)).slice(-2);return"+00:00"==f?"Z":f},$.timepicker.timezoneOffsetNumber=function(a){var b=a.toString().replace(":","");return"Z"===b.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(b)?("-"===b.substr(0,1)?-1:1)*(60*parseInt(b.substr(1,2),10)+parseInt(b.substr(3,2),10)):parseInt(a,10)},$.timepicker.timezoneAdjust=function(a,b,c){var d=$.timepicker.timezoneOffsetNumber(b),e=$.timepicker.timezoneOffsetNumber(c);return isNaN(e)||a.setMinutes(a.getMinutes()+-d- -e),a},$.timepicker.timeRange=function(a,b,c){return $.timepicker.handleRange("timepicker",a,b,c)},$.timepicker.datetimeRange=function(a,b,c){$.timepicker.handleRange("datetimepicker",a,b,c)},$.timepicker.dateRange=function(a,b,c){$.timepicker.handleRange("datepicker",a,b,c)},$.timepicker.handleRange=function(b,d,f,g){function c(e,h){var a=d[b]("getDate"),i=f[b]("getDate"),j=e[b]("getDate");if(null!==a){var k=new Date(a.getTime()),c=new Date(a.getTime());k.setMilliseconds(k.getMilliseconds()+g.minInterval),c.setMilliseconds(c.getMilliseconds()+g.maxInterval),0<g.minInterval&&k>i?f[b]("setDate",k):0<g.maxInterval&&c<i?f[b]("setDate",c):a>i&&h[b]("setDate",j)}}function a(c,d,e){if(c.val()){var f=c[b].call(c,"getDate");null!==f&&0<g.minInterval&&("minDate"===e&&f.setMilliseconds(f.getMilliseconds()+g.minInterval),"maxDate"===e&&f.setMilliseconds(f.getMilliseconds()-g.minInterval)),f.getTime&&d[b].call(d,"option",e,f)}}g=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},g);var h=!1;return"timepicker"===b&&(h=!0,b="datetimepicker"),$.fn[b].call(d,$.extend({timeOnly:h,onClose:function(){c($(this),f)},onSelect:function(){a($(this),f,"minDate")}},g,g.start)),$.fn[b].call(f,$.extend({timeOnly:h,onClose:function(){c($(this),d)},onSelect:function(){a($(this),d,"maxDate")}},g,g.end)),c(d,f),a(d,f,"minDate"),a(f,d,"maxDate"),$([d.get(0),f.get(0)])},$.timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+Math.floor(a/1e3)),this.microseconds=a%1e3,this}),$.timepicker.version="@@version"}}),!function(a){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],a):a(jQuery.datepicker)}(function(a){return a.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.setDefaults(a.regional.it),a.regional.it});

/*=======================================================
 ATTIVAZIONE AUTOMATICA DATEPICKER + SELECTPICKER
=======================================================*/
function ctrl_datepicker(){$(".datepicker").datepicker(),$(".datetimepicker").datetimepicker({separator:" - "})}
function ctrl_selectpicker(){$(".selectpicker").selectpicker()}

/*=======================================================
 FIX ALERT + CONFIRM
=======================================================*/
const { dialog } = require('electron').remote
alert=function(a){var b={defaultId:0,cancelId:0,detail:a,message:"",title:config.APP_NAME};dialog.showMessageBoxSync(null,b)};
confirm=function(a){var b=dialog.showMessageBoxSync(null,{buttons:["Ok","Cancel"],defaultId:0,cancelId:1,detail:a,message:"",title:config['APP_NAME']});return!b};